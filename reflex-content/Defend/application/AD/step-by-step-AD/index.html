<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Already in a crisis ? Don't waste time, cheat"><meta name=author content="Reflex contributors"><link href=https://reflex.hopledge.fr/reflex-content/Defend/application/AD/step-by-step-AD/ rel=canonical><link href=../../../web/iis/ rel=prev><link href=../../exchange/step-by-step-exchange/ rel=next><link rel=icon href=../../../../../assets/clover.png><meta name=generator content="mkdocs-1.4.2, mkdocs-material-9.0.7"><title>step by step AD - Reflex</title><link rel=stylesheet href=../../../../../assets/stylesheets/main.558e4712.min.css><link rel=stylesheet href=../../../../../assets/stylesheets/palette.2505c338.min.css><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script></head> <body dir=ltr data-md-color-scheme=slate data-md-color-primary=red data-md-color-accent=deep-orange> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#active-directory class=md-skip> Skip to content </a> </div> <div data-md-component=announce> <aside class=md-banner> <div class="md-banner__inner md-grid md-typeset"> <p></p> </div> </aside> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=../../../../.. title=Reflex class="md-header__button md-logo" aria-label=Reflex data-md-component=logo> <img src=../../../../../assets/clover.png alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Reflex </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> step by step AD </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg> </label> <nav class=md-search__options aria-label=Search> <button type=reset class="md-search__icon md-icon" title=Clear aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg> </button> </nav> <div class=md-search__suggest data-md-component=search-suggest></div> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list role=presentation></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/Hopledge/reflex-content title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> Hopledge/reflex-content </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=../../../../.. title=Reflex class="md-nav__button md-logo" aria-label=Reflex data-md-component=logo> <img src=../../../../../assets/clover.png alt=logo> </a> Reflex </label> <div class=md-nav__source> <a href=https://github.com/Hopledge/reflex-content title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><!-- Font Awesome Free 6.2.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </div> <div class=md-source__repository> Hopledge/reflex-content </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../.. class=md-nav__link> Welcome </a> </li> <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2 checked> <label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0> âš¡ Reflex <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=1 aria-labelledby=__nav_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2> <span class="md-nav__icon md-icon"></span> âš¡ Reflex </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_1> <label class=md-nav__link for=__nav_2_1 id=__nav_2_1_label tabindex=0> âš”ï¸ Attack <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_1> <span class="md-nav__icon md-icon"></span> âš”ï¸ Attack </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Attack/ports_scan/ class=md-nav__link> Ports scan </a> </li> <li class=md-nav__item> <a href=../../../../Attack/web/ class=md-nav__link> Web </a> </li> <li class=md-nav__item> <a href=../../../../Attack/dorks/ class=md-nav__link> Dorks </a> </li> <li class=md-nav__item> <a href=../../../../Attack/osint/ class=md-nav__link> Osint </a> </li> <li class=md-nav__item> <a href=../../../../Attack/smb/ class=md-nav__link> SMB </a> </li> <li class=md-nav__item> <a href=../../../../Attack/ftp/ class=md-nav__link> FTP </a> </li> <li class=md-nav__item> <a href=../../../../Attack/redis/ class=md-nav__link> Redis </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2 checked> <label class=md-nav__link for=__nav_2_2 id=__nav_2_2_label tabindex=0> ğŸ›¡ï¸ Defend <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_2_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2> <span class="md-nav__icon md-icon"></span> ğŸ›¡ï¸ Defend </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_1> <label class=md-nav__link for=__nav_2_2_1 id=__nav_2_2_1_label tabindex=0> ğŸ“€ OS <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_1_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_1> <span class="md-nav__icon md-icon"></span> ğŸ“€ OS </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../OS/linux/ class=md-nav__link> Linux </a> </li> <li class=md-nav__item> <a href=../../../OS/bsd/ class=md-nav__link> BSD </a> </li> <li class=md-nav__item> <a href=../../../OS/windows/ class=md-nav__link> Windows </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_2> <label class=md-nav__link for=__nav_2_2_2 id=__nav_2_2_2_label tabindex=0> ğŸ”¥ L3 - Firewall <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_2> <span class="md-nav__icon md-icon"></span> ğŸ”¥ L3 - Firewall </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../firewall/ufw/ class=md-nav__link> UFW </a> </li> <li class=md-nav__item> <a href=../../../firewall/firewalld/ class=md-nav__link> FirewallD </a> </li> <li class=md-nav__item> <a href=../../../firewall/iptables/ class=md-nav__link> Iptables </a> </li> <li class=md-nav__item> <a href=../../../firewall/nftables/ class=md-nav__link> NFTables </a> </li> <li class=md-nav__item> <a href=../../../firewall/stormshield/ class=md-nav__link> Stormshield </a> </li> <li class=md-nav__item> <a href=../../../firewall/fortigate/ class=md-nav__link> Fortigate </a> </li> <li class=md-nav__item> <a href=../../../firewall/step-by-step-configure-fortigate/ class=md-nav__link> Step by step configure fortigate </a> </li> <li class=md-nav__item> <a href=../../../firewall/step-by-step-configure-vpn-sns-forti/ class=md-nav__link> Step by step configure vpn sns forti </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_3> <label class=md-nav__link for=__nav_2_2_3 id=__nav_2_2_3_label tabindex=0> ğŸ¤– L7 - SIEM <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_3> <span class="md-nav__icon md-icon"></span> ğŸ¤– L7 - SIEM </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../siem/splunk/ class=md-nav__link> Splunk </a> </li> <li class=md-nav__item> <a href=../../../siem/windows/ class=md-nav__link> Windows </a> </li> <li class=md-nav__item> <a href=../../../siem/linux/ class=md-nav__link> Linux </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_4> <label class=md-nav__link for=__nav_2_2_4 id=__nav_2_2_4_label tabindex=0> ğŸ“¡ L7 - Webserver <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_4> <span class="md-nav__icon md-icon"></span> ğŸ“¡ L7 - Webserver </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../web/apache/ class=md-nav__link> Apache webserver </a> </li> <li class=md-nav__item> <a href=../../../web/step-by-step-apache/ class=md-nav__link> Apache </a> </li> <li class=md-nav__item> <a href=../../../web/nginx/ class=md-nav__link> Nginx </a> </li> <li class=md-nav__item> <a href=../../../web/iis/ class=md-nav__link> IIS </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_5 checked> <label class=md-nav__link for=__nav_2_2_5 id=__nav_2_2_5_label tabindex=0> ğŸ’¡ L7 - Application <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=3 aria-labelledby=__nav_2_2_5_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2_5> <span class="md-nav__icon md-icon"></span> ğŸ’¡ L7 - Application </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_5_1 checked> <label class=md-nav__link for=__nav_2_2_5_1 id=__nav_2_2_5_1_label tabindex=0> â˜ï¸ AD <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_5_1_label aria-expanded=true> <label class=md-nav__title for=__nav_2_2_5_1> <span class="md-nav__icon md-icon"></span> â˜ï¸ AD </label> <ul class=md-nav__list data-md-scrollfix> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> step by step AD <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> step by step AD </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#active-directory class=md-nav__link> Active Directory </a> <nav class=md-nav aria-label="Active Directory"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration-du-controleur-de-domaine class=md-nav__link> Configuration du contrÃ´leur de domaine </a> </li> <li class=md-nav__item> <a href=#ajout-dun-second-controleur-de-domaine class=md-nav__link> Ajout d'un second contrÃ´leur de domaine </a> </li> <li class=md-nav__item> <a href=#jonction-dune-machine-windows-au-domaine class=md-nav__link> Jonction d'une machine Windows au domaine </a> </li> <li class=md-nav__item> <a href=#gpo class=md-nav__link> GPO </a> <nav class=md-nav aria-label=GPO> <ul class=md-nav__list> <li class=md-nav__item> <a href=#strategie-daudit class=md-nav__link> StratÃ©gie d'audit </a> </li> <li class=md-nav__item> <a href=#monter-un-disque-reseau class=md-nav__link> Monter un disque rÃ©seau </a> </li> <li class=md-nav__item> <a href=#installation-dun-logiciel class=md-nav__link> Installation d'un logiciel </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_5_2> <label class=md-nav__link for=__nav_2_2_5_2 id=__nav_2_2_5_2_label tabindex=0> ğŸ“¨ Exchange <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_5_2_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_5_2> <span class="md-nav__icon md-icon"></span> ğŸ“¨ Exchange </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../exchange/step-by-step-exchange/ class=md-nav__link> Step by step exchange </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_5_3> <label class=md-nav__link for=__nav_2_2_5_3 id=__nav_2_2_5_3_label tabindex=0> ğŸ¦ Veeam <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_5_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_5_3> <span class="md-nav__icon md-icon"></span> ğŸ¦ Veeam </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../veeam/veeam-linux/ class=md-nav__link> Veeam linux </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_2_5_4> <label class=md-nav__link for=__nav_2_2_5_4 id=__nav_2_2_5_4_label tabindex=0> ğŸ› Malwares <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=4 aria-labelledby=__nav_2_2_5_4_label aria-expanded=false> <label class=md-nav__title for=__nav_2_2_5_4> <span class="md-nav__icon md-icon"></span> ğŸ› Malwares </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../malwares/analysis/ class=md-nav__link> Analysis </a> </li> <li class=md-nav__item> <a href=../../malwares/reputation/ class=md-nav__link> Reputation </a> </li> </ul> </nav> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../../../investigation/ class=md-nav__link> Investigation </a> </li> </ul> </nav> </li> <li class="md-nav__item md-nav__item--nested"> <input class="md-nav__toggle md-toggle " type=checkbox id=__nav_2_3> <label class=md-nav__link for=__nav_2_3 id=__nav_2_3_label tabindex=0> âš™ï¸ Misc <span class="md-nav__icon md-icon"></span> </label> <nav class=md-nav data-md-level=2 aria-labelledby=__nav_2_3_label aria-expanded=false> <label class=md-nav__title for=__nav_2_3> <span class="md-nav__icon md-icon"></span> âš™ï¸ Misc </label> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=../../../../Misc/git/ class=md-nav__link> Git </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=https://www.dfrecipes.fr/ class=md-nav__link> DFRecipes </a> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#active-directory class=md-nav__link> Active Directory </a> <nav class=md-nav aria-label="Active Directory"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#configuration-du-controleur-de-domaine class=md-nav__link> Configuration du contrÃ´leur de domaine </a> </li> <li class=md-nav__item> <a href=#ajout-dun-second-controleur-de-domaine class=md-nav__link> Ajout d'un second contrÃ´leur de domaine </a> </li> <li class=md-nav__item> <a href=#jonction-dune-machine-windows-au-domaine class=md-nav__link> Jonction d'une machine Windows au domaine </a> </li> <li class=md-nav__item> <a href=#gpo class=md-nav__link> GPO </a> <nav class=md-nav aria-label=GPO> <ul class=md-nav__list> <li class=md-nav__item> <a href=#strategie-daudit class=md-nav__link> StratÃ©gie d'audit </a> </li> <li class=md-nav__item> <a href=#monter-un-disque-reseau class=md-nav__link> Monter un disque rÃ©seau </a> </li> <li class=md-nav__item> <a href=#installation-dun-logiciel class=md-nav__link> Installation d'un logiciel </a> </li> </ul> </nav> </li> </ul> </nav> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1>step by step AD</h1> <h2 id=active-directory>Active Directory</h2> <h3 id=configuration-du-controleur-de-domaine>Configuration du contrÃ´leur de domaine</h3> <ul> <li>[x] Se connecter au DC en tant qu'Administrateur et accÃ©der au tableau de bord</li> <li>[x] Changer le nom du Serveur pour y mettre un nom explicite (SRV-DC01)</li> <li>[x] Ajouter des rÃ´les et fonctionnalitÃ©s depuis "GÃ©rer" en haut Ã  droite</li> <li>[x] Dans "RÃ´les de serveurs", cocher "Service AD DS" et "Service DNS"</li> <li> <p>[x] Laisser le reste par dÃ©faut, puis "Installer"</p> </li> <li> <p>[x] Promouvoir ce serveur en contrÃ´leur de domaine</p> </li> </ul> <p><img alt src=https://md.floppy.sh/uploads/2a492489-7bfb-4390-b73b-fa7da7e0c500.png></p> <ul> <li> <p>[x] Configurer le dÃ©ploiement de l'AD</p> <ul> <li>[x] Ajouter un nouvelle forÃªt : corp05.com</li> <li>[x] Ajouter un mot de passe de restauration des services d'annuaires</li> </ul> </li> </ul> <p><img alt src=https://md.floppy.sh/uploads/71680327-43ec-4ad5-80ec-87da77dba1b1.png></p> <ul> <li>[x] VÃ©rifier la configuration puis "Installer" (le serveur va redÃ©marrer)</li> </ul> <p>Pour gÃ©rer les services Active Directory, vous trouvez l'outil "Utilisateurs et ordinateurs Active Directory" dans le menu dÃ©marrer, et dans Â« Outils dâ€™administration Â»</p> <ul> <li>[x] CrÃ©ation dâ€™un nouvel objet â€œutilisateurâ€ dans l'AD</li> </ul> <p><img alt src=https://md.floppy.sh/uploads/a2d28db9-33a6-47b7-aa27-7bb78ac49be5.png></p> <h3 id=ajout-dun-second-controleur-de-domaine>Ajout d'un second contrÃ´leur de domaine</h3> <ul> <li>[x] Ajouter le serveur au domaine</li> <li>[x] Ajouter le rÃ´le AD DS</li> <li>[x] Promouvoir le serveur en tant que contÃ´leur de domaine</li> <li>[x] Cocher "Ajouter un contrÃ´leur de domaine Ã  un domaine existant"</li> </ul> <p><img alt src=https://md.floppy.sh/uploads/4aa684ef-e7a9-45be-a1e0-0e754f0eaa47.png></p> <ul> <li>[x] SÃ©lectionner le serveur Ã  partir duquel vous voulez rÃ©pliquer les donnÃ©es AD</li> </ul> <p><img alt src=https://md.floppy.sh/uploads/b08c0b17-e290-449b-8e02-20b9d7863661.png></p> <ul> <li>[x] VÃ©rifier la bonne remontÃ©e du DC02 depuis la console du DC01</li> </ul> <p><img alt src=https://md.floppy.sh/uploads/1be37ec3-ee33-4fcd-9eaa-d5e65f74745d.png></p> <h3 id=jonction-dune-machine-windows-au-domaine>Jonction d'une machine Windows au domaine</h3> <p>Sur le poste client, commencez par lui attribuer une adresse IP fixe et une adresse de DNS principal (prÃ©fÃ©rÃ©) du serveur AD.</p> <p>Dans les paramÃ¨tres avancÃ©s, allez dans lâ€™onglet DNS. Dans la partie Â« Suffixe DNS pour cette connexion Â», renseignez le nom complet de votre domaine. Cochez la case Â« Utiliser le suffixe DNS de cette connexion pour lâ€™enregistrement DNS Â».</p> <ul> <li>[x] Test de ping sur le nom du serveur (ping SRV-DC01)</li> </ul> <p>Depuis les paramÃ¨tres de la machine (Panneau de config&gt; SystÃ¨me et SÃ©curitÃ© &gt; SystÃ¨me &gt; Renommer ce PC), renommez le poste client par un nom identifiable ou une appelation dÃ©finie par la politique de nommage de lâ€™entreprise (PC-001, PC-COMPTA-1â€¦). Dans la partie Â« Membre dâ€™un Â», cochez Domaine et renseignez le nom de votre domaine.</p> <p><img alt src=https://md.floppy.sh/uploads/8dd248ef-9ffd-4cfe-a920-4199cb96a623.png></p> <ul> <li>[x] Renommer le client et le joindre au domaine (identifiants admin nÃ©cessaires)</li> </ul> <p><img alt src=https://md.floppy.sh/uploads/8313ece1-97da-4394-a60e-dd3752eb9189.png></p> <ul> <li>[x] RedÃ©marrer et se connection avec un compte user du domaine</li> </ul> <h3 id=gpo>GPO</h3> <h4 id=strategie-daudit>StratÃ©gie d'audit</h4> <p>On modifie la default domain policy puis on suit le guide d'hygiÃ¨ne de l'ANSSI.</p> <p>On active toutes les stratÃ©gies d'audit de base Ã  cet endroit : </p> <p><code>Configuration ordinateur\StratÃ©gies\ParamÃ¨tres Windows\ParamÃ¨tres de sÃ©curitÃ©\StratÃ©gies locales\ StratÃ©gie d'audit</code></p> <p><img alt src=https://md.floppy.sh/uploads/7785614d-5119-4308-a1e3-a1fb20166b2c.png></p> <p>Et on fait la mÃªme chose, plus finement, avec les stratÃ©gies d'audit avancÃ©es : </p> <p><code>Configuration ordinateur\StratÃ©gies\ParamÃ¨tres Windows\ParamÃ¨tres de sÃ©curitÃ©\Configuration avancÃ©e de la stratÃ©gie d'audit\StratÃ©gies d'audit systÃ¨me - Objet StratÃ©gie de groupe</code></p> <h4 id=monter-un-disque-reseau>Monter un disque rÃ©seau</h4> <ul> <li> <p>[x] Ouvrir la console "Gestion de stratÃ©gie de groupe" depuis le DC ou depuis un poste utilisateur avec <a href=#Remote-Server-Administration-Tools-RSAT>RSAT</a></p> </li> <li> <p>[x] Clic droit sur "Objets de stratÃ©gie de groupe" puis "Nouveau". Nommer cette GPO, par exemple "U_Lecteur-<nom_partage>".</p> </li> <li> <p>[x] Modifier cette GPO et accÃ©der Ã  l'emplacement suivant : <code>Configuration utilisateur &gt; PrÃ©fÃ©rences &gt; ParamÃ¨tres Windows &gt; Mappages de lecteur</code></p> </li> </ul> <p>Puis <code>Sur la droite, effectuer un clic droit : Nouveau &gt; Lecteur mappÃ©</code></p> <ul> <li>[x] Saisir les informations du lecteur rÃ©seau<blockquote> <p>L'emplacement du lecteur rÃ©seau peut se trouver sur un serveur de fichier</p> </blockquote> </li> </ul> <p><img alt src=https://md.floppy.sh/uploads/46b84c2b-dfdc-424a-bf51-f87a5b0eba84.png></p> <ul> <li>[x] Lier la GPO Ã  un OU / Groupe de sÃ©curitÃ© / User</li> </ul> <p>Afin de dÃ©ployer la GPO Ã  un ou des utilisateur(s) spÃ©cifique(s) : 1. SÃ©lectionner la GPO dans "Objets de stratÃ©gie de groupe" 2. Ajouter un utilisateur, Groupe de sÃ©curitÃ©, ordinateur dans le menu "Etendue" &gt; Filtrage de sÃ©curitÃ© 3. Supprimer "Utilisateurs authentifiÃ©s"</p> <p><img alt src=https://md.floppy.sh/uploads/1201a2b9-d8cd-41e8-a135-bd1d3ff2dce3.png></p> <ol> <li> <p>Ajouter "Utilisateurs authentifiÃ©s dans "DÃ©lÃ©gation" avec des autorisations de Lecture.</p> </li> <li> <p>[x] Tester la GPO un ordinateur du domaine avec un utilisateur authentifiÃ©</p> <blockquote> <p>Commande powershell pour forcer le dÃ©ploiement : gpupdate /force Commande powershell pour voir le contenue du dÃ©ploiement : gpresult /r</p> </blockquote> </li> </ol> <h4 id=installation-dun-logiciel>Installation d'un logiciel</h4> <ul> <li> <p>[x] Ouvrir la console "Gestion de stratÃ©gie de groupe" depuis le DC ou depuis un poste utilisateur avec <a href=#Remote-Server-Administration-Tools-RSAT>RSAT</a></p> </li> <li> <p>[x] Clic droit sur "Objets de stratÃ©gie de groupe" puis "Nouveau". Nommez cette GPO, par exemple "O_Deployer-<nom_service>".</p> </li> <li> <p>[x] Modifier cette GPO et accÃ©der Ã  l'emplacement suivant : <code>Configuration ordinateur &gt; StratÃ©gies &gt; ParamÃ¨tres du logiciel &gt; Installation de logiciel</code></p> </li> <li> <p>[x] Effectuer un clic droit sur "Installation de logiciel" puis sous "Nouveau" cliqurz sur "Package"</p> </li> <li> <p>[x] Indiquer le chemin vers le fichier MSI. </p> <blockquote> <p>Utiliser un chemin rÃ©seau vers un partage rÃ©seau (serveur de fichier) pour rechercher le fichier MSI.</p> </blockquote> </li> </ul> <p>Lorsque l'on dÃ©ploie un logiciel, il y a deux modes principaux :</p> <blockquote> <p><strong>PubliÃ©</strong> : ce mode est disponible dans le cas de l'installation d'un logiciel dans les paramÃ¨tres utilisateurs. Le logiciel est alors disponible Ã  l'installation sur la machine, mais il ne s'installe pas automatiquement. L'utilisateur peut installer le logiciel s'il en a besoin. <strong>AttribuÃ©</strong> : ce mode sert Ã  installer un logiciel par GPO sur une machine, de maniÃ¨re automatique. C'est ce qui nous intÃ©resse aujourd'hui.</p> </blockquote> <ul> <li> <p>[x] SÃ©lectionner le mode "AttribuÃ©"</p> </li> <li> <p>[x] Lier la GPO Ã  un OU / Groupe de sÃ©curitÃ© / User / Ordinateur</p> </li> </ul> <p>Afin de dÃ©ployer la GPO Ã  un ou des utilisateur(s) spÃ©cifique(s) : 1. SÃ©lectionner la GPO dans "Objets de stratÃ©gie de groupe" 2. Ajouter un ordinateur dans le menu "Etendue" &gt; Filtrage de sÃ©curitÃ© 3. Supprimer "Utilisateurs authentifiÃ©s"</p> <p><img alt src=https://md.floppy.sh/uploads/bcaa4f81-ca2c-45ab-beb2-2a5d165584c6.png></p> <ol> <li> <p>Ajouter "Utilisateurs authentifiÃ©s dans "DÃ©lÃ©gation" avec des autorisations de Lecture.</p> </li> <li> <p>[x] Tester la GPO sur un ordinateur du domaine avec un utilisateur authentifiÃ©</p> <blockquote> <p>Commande powershell pour forcer le dÃ©ploiement : gpupdate /force Commande powershell pour voir contenue du dÃ©ploiement : gpresult /r</p> </blockquote> </li> </ol> </article> </div> </div> <a href=# class="md-top md-icon" data-md-component=top hidden> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg> Back to top </a> </main> <footer class=md-footer> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-copyright> <div class=md-copyright__highlight> CC BY-NC-SA 4.0 </div> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "../../../../..", "features": ["navigation.instant", "navigation.sections", "navigation.top", "navigation.tracking", "header.autohide", "toc.follow", "search.suggest", "content.code.annotate"], "search": "../../../../../assets/javascripts/workers/search.db81ec45.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script> <script src=../../../../../assets/javascripts/bundle.a00a7c5e.min.js></script> </body> </html>